//
//  arbor-graphics.js
//  canvas fructose
//
//  Copyright (c) 2017 Samizdat Drafting Co.
// 
//  Permission is hereby granted, free of charge, to any person
//  obtaining a copy of this software and associated documentation
//  files (the "Software"), to deal in the Software without
//  restriction, including without limitation the rights to use,
//  copy, modify, merge, publish, distribute, sublicense, and/or sell
//  copies of the Software, and to permit persons to whom the
//  Software is furnished to do so, subject to the following
//  conditions:
// 
//  The above copyright notice and this permission notice shall be
//  included in all copies or substantial portions of the Software.
// 
//  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
//  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
//  OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
//  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
//  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
//  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
//  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
//  OTHER DEALINGS IN THE SOFTWARE.
//

(function($){

  /*        etc.js */  var trace=function(msg){if(typeof(window)=="undefined"||!window.console){return}var len=arguments.length;var args=[];for(var i=0;i<len;i++){args.push("arguments["+i+"]")}eval("console.log("+args.join(",")+")")};var dirname=function(a){var b=a.replace(/^\/?(.*?)\/?$/,"$1").split("/");b.pop();return"/"+b.join("/")};var basename=function(b){var c=b.replace(/^\/?(.*?)\/?$/,"$1").split("/");var a=c.pop();if(a==""){return null}else{return a}};var _ordinalize_re=/(\d)(?=(\d\d\d)+(?!\d))/g;var ordinalize=function(a){var b=""+a;if(a<11000){b=(""+a).replace(_ordinalize_re,"$1,")}else{if(a<1000000){b=Math.floor(a/1000)+"k"}else{if(a<1000000000){b=(""+Math.floor(a/1000)).replace(_ordinalize_re,"$1,")+"m"}}}return b};var nano=function(a,b){return a.replace(/\{([\w\-\.]*)}/g,function(f,c){var d=c.split("."),e=b[d.shift()];$.each(d,function(){if(e.hasOwnProperty(this)){e=e[this]}else{e=f}});return e})};var objcopy=function(a){if(a===undefined){return undefined}if(a===null){return null}if(a.parentNode){return a}switch(typeof a){case"string":return a.substring(0);break;case"number":return a+0;break;case"boolean":return a===true;break}var b=($.isArray(a))?[]:{};$.each(a,function(d,c){b[d]=objcopy(c)});return b};var objmerge=function(d,b){d=d||{};b=b||{};var c=objcopy(d);for(var a in b){c[a]=b[a]}return c};var objcmp=function(e,c,d){if(!e||!c){return e===c}if(typeof e!=typeof c){return false}if(typeof e!="object"){return e===c}else{if($.isArray(e)){if(!($.isArray(c))){return false}if(e.length!=c.length){return false}}else{var h=[];for(var f in e){if(e.hasOwnProperty(f)){h.push(f)}}var g=[];for(var f in c){if(c.hasOwnProperty(f)){g.push(f)}}if(!d){h.sort();g.sort()}if(h.join(",")!==g.join(",")){return false}}var i=true;$.each(e,function(a){var b=objcmp(e[a],c[a]);i=i&&b;if(!i){return false}});return i}};var objkeys=function(b){var a=[];$.each(b,function(d,c){if(b.hasOwnProperty(d)){a.push(d)}});return a};var objcontains=function(c){if(!c||typeof c!="object"){return false}for(var b=1,a=arguments.length;b<a;b++){if(c.hasOwnProperty(arguments[b])){return true}}return false};var uniq=function(b){var a=b.length;var d={};for(var c=0;c<a;c++){d[b[c]]=true}return objkeys(d)};var arbor_path=function(){var a=$("script").map(function(b){var c=$(this).attr("src");if(!c){return}if(c.match(/arbor[^\/\.]*.js|dev.js/)){return c.match(/.*\//)||"/"}});if(a.length>0){return a[0]}else{return null}};
  /*     colors.js */  var Colors=(function(){var f=/#[0-9a-f]{6}/i;var b=/#(..)(..)(..)/;var c=function(h){var g=h.toString(16);return(g.length==2)?g:"0"+g};var a=function(g){return parseInt(g,16)};var d=function(g){if(!g||typeof g!="object"){return false}var h=objkeys(g).sort().join("");if(h=="abgr"){return true}};var e={CSS:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},decode:function(h){var g=arguments.length;for(var l=g-1;l>=0;l--){if(arguments[l]===undefined){g--}}var k=arguments;if(!h){return null}if(g==1&&d(h)){return h}var j=null;if(typeof h=="string"){var o=1;if(g==2){o=k[1]}var n=e.CSS[h.toLowerCase()];if(n!==undefined){h=n}var m=h.match(f);if(m){vals=h.match(b);if(!vals||!vals.length||vals.length!=4){return null}j={r:a(vals[1]),g:a(vals[2]),b:a(vals[3]),a:o}}}else{if(typeof h=="number"){if(g>=3){j={r:k[0],g:k[1],b:k[2],a:1};if(g>=4){j.a*=k[3]}}else{if(g>=1){j={r:k[0],g:k[0],b:k[0],a:1};if(g==2){j.a*=k[1]}}}}}return j},validate:function(g){if(!g||typeof g!="string"){return false}if(e.CSS[g.toLowerCase()]!==undefined){return true}if(g.match(f)){return true}return false},mix:function(h,g,k){var j=e.decode(h);var i=e.decode(g)},blend:function(g,j){j=(j!==undefined)?Math.max(0,Math.min(1,j)):1;var h=e.decode(g);if(!h){return null}if(j==1){return g}var h=g;if(typeof g=="string"){h=e.decode(g)}var i=objcopy(h);i.a*=j;return nano("rgba({r},{g},{b},{a})",i)},encode:function(g){if(!d(g)){g=e.decode(g);if(!d(g)){return null}}if(g.a==1){return nano("#{r}{g}{b}",{r:c(g.r),g:c(g.g),b:c(g.b)})}else{return nano("rgba({r},{g},{b},{a})",g)}}};return e})();
  /* primitives.js */  var Primitives=function(i,h,d){var e=function(j,n,k,m,l){this.x=j;this.y=n;this.w=k;this.h=m;this.style=(l!==undefined)?l:{}};e.prototype={draw:function(j){this._draw(j)},_draw:function(j,o,k,m,l){if(objcontains(j,"stroke","fill","width")){l=j}if(this.x!==undefined){j=this.x,o=this.y,k=this.w,m=this.h;l=objmerge(this.style,l)}l=objmerge(h,l);if(!l.stroke&&!l.fill){return}var n=0.5522848;ox=(k/2)*n,oy=(m/2)*n,xe=j+k,ye=o+m,xm=j+k/2,ym=o+m/2;i.save();i.beginPath();i.moveTo(j,ym);i.bezierCurveTo(j,ym-oy,xm-ox,o,xm,o);i.bezierCurveTo(xm+ox,o,xe,ym-oy,xe,ym);i.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye);i.bezierCurveTo(xm-ox,ye,j,ym+oy,j,ym);i.closePath();if(l.fill!==null){if(l.alpha!==undefined){i.fillStyle=Colors.blend(l.fill,l.alpha)}else{i.fillStyle=Colors.encode(l.fill)}i.fill()}if(l.stroke!==null){i.strokeStyle=Colors.encode(l.stroke);if(!isNaN(l.width)){i.lineWidth=l.width}i.stroke()}i.restore()}};var f=function(j,o,k,m,n,l){if(objcontains(n,"stroke","fill","width")){l=n;n=0}this.x=j;this.y=o;this.w=k;this.h=m;this.r=(n!==undefined)?n:0;this.style=(l!==undefined)?l:{}};f.prototype={draw:function(j){this._draw(j)},_draw:function(k,p,l,n,o,m){if(objcontains(o,"stroke","fill","width","alpha")){m=o;o=0}else{if(objcontains(k,"stroke","fill","width","alpha")){m=k}}if(this.x!==undefined){k=this.x,p=this.y,l=this.w,n=this.h;m=objmerge(this.style,m)}m=objmerge(h,m);if(!m.stroke&&!m.fill){return}var j=(o>0);i.save();i.beginPath();i.moveTo(k+o,p);i.lineTo(k+l-o,p);if(j){i.quadraticCurveTo(k+l,p,k+l,p+o)}i.lineTo(k+l,p+n-o);if(j){i.quadraticCurveTo(k+l,p+n,k+l-o,p+n)}i.lineTo(k+o,p+n);if(j){i.quadraticCurveTo(k,p+n,k,p+n-o)}i.lineTo(k,p+o);if(j){i.quadraticCurveTo(k,p,k+o,p)}if(m.fill!==null){if(m.alpha!==undefined){i.fillStyle=Colors.blend(m.fill,m.alpha)}else{i.fillStyle=Colors.encode(m.fill)}i.fill()}if(m.stroke!==null){i.strokeStyle=Colors.encode(m.stroke);if(!isNaN(m.width)){i.lineWidth=m.width}i.stroke()}i.restore()}};var g=function(j,o,k,m,n,l){if(objcontains(n,"stroke","fill","width")){l=n;n=0}this.x=j;this.y=o;this.w=k;this.h=m;this.r=(n!==undefined)?n:0;this.style=(l!==undefined)?l:{}};g.prototype={draw:function(j){this._draw(j)},_draw:function(q,p,t,n,j,l){if(objcontains(j,"stroke","fill","width","alpha")){l=j;j=0}else{if(objcontains(q,"stroke","fill","width","alpha")){l=q}}if(this.x!==undefined){q=this.x,p=this.y,t=this.w,n=this.h;l=objmerge(this.style,l)}l=objmerge(h,l);if(!l.stroke&&!l.fill){return}var s=0.275;var k=1-s;var o=n*s;t=t-2*o;var m=(j>0);i.save();i.beginPath();i.moveTo(q+o,p);i.lineTo(q,p+n*s);i.lineTo(q,p+n*k);i.lineTo(q+o,p+n);i.lineTo(q+t+o,p+n);i.lineTo(q+t+2*o,p+n*k);i.lineTo(q+t+2*o,p+n*s);i.lineTo(q+t+o,p);i.lineTo(q+o,p);if(l.fill!==null){if(l.alpha!==undefined){i.fillStyle=Colors.blend(l.fill,l.alpha)}else{i.fillStyle=Colors.encode(l.fill)}i.fill()}if(l.stroke!==null){i.strokeStyle=Colors.encode(l.stroke);if(!isNaN(l.width)){i.lineWidth=l.width}i.stroke()}i.restore()}};var c=function(j,o,k,m,n,l){if(objcontains(n,"stroke","fill","width")){l=n;n=0}this.x=j;this.y=o;this.w=k;this.h=m;this.r=(n!==undefined)?n:0;this.style=(l!==undefined)?l:{}};c.prototype={draw:function(j){this._draw(j)},_draw:function(k,p,l,n,o,m){if(objcontains(o,"stroke","fill","width","alpha")){m=o;o=0}else{if(objcontains(k,"stroke","fill","width","alpha")){m=k}}if(this.x!==undefined){k=this.x,p=this.y,l=this.w,n=this.h;m=objmerge(this.style,m)}m=objmerge(h,m);if(!m.stroke&&!m.fill){return}var j=(o>0);i.save();i.beginPath();i.moveTo(k+l/2+o,p+o);i.lineTo(k+l-o,p+n-o);i.quadraticCurveTo(k+l,p+n,k+l-o,p+n+o);i.lineTo(k+o,p+n+o);i.quadraticCurveTo(k,p+n,k+o,p+n-o);i.lineTo(k+l/2-o,p+o);i.quadraticCurveTo(k+l/2,p,k+l/2+o,p+o);if(m.fill!==null){if(m.alpha!==undefined){i.fillStyle=Colors.blend(m.fill,m.alpha)}else{i.fillStyle=Colors.encode(m.fill)}i.fill()}if(m.stroke!==null){i.strokeStyle=Colors.encode(m.stroke);if(!isNaN(m.width)){i.lineWidth=m.width}i.stroke()}i.restore()}};var a=function(k,n,j,l,m){if(m!==undefined||typeof l=="number"){this.points=[{x:k,y:n},{x:j,y:l}];this.style=m||{}}else{if($.isArray(k)){this.points=k;this.style=n||{}}else{this.points=[k,n];this.style=j||{}}}};a.prototype={draw:function(j){if(this.points.length<2){return}var l=[];if(!$.isArray(this.points[0])){l.push(this.points)}else{l=this.points}i.save();i.beginPath();$.each(l,function(p,o){i.moveTo(o[0].x+0.5,o[0].y+0.5);$.each(o,function(q,r){if(q==0){return}i.lineTo(r.x+0.5,r.y+0.5)})});var k=$.extend(objmerge(h,this.style),j);if(k.closed){i.closePath()}if(k.fill!==undefined){var n=Colors.decode(k.fill,(k.alpha!==undefined)?k.alpha:1);if(n){i.fillStyle=Colors.encode(n)}i.fill()}if(k.stroke!==undefined){var m=Colors.decode(k.stroke,(k.alpha!==undefined)?k.alpha:1);if(m){i.strokeStyle=Colors.encode(m)}if(!isNaN(k.width)){i.lineWidth=k.width}i.stroke()}i.restore()}};var b=function(k,j,n,m){var l=Colors.decode(k,j,n,m);if(l){this.r=l.r;this.g=l.g;this.b=l.b;this.a=l.a}};b.prototype={toString:function(){return Colors.encode(this)},blend:function(){trace("blend",this.r,this.g,this.b,this.a)}};return{_Ellipse:e,_Rect:f,_Octagon:g,_Triangle:c,_Color:b,_Path:a}};
  /*   graphics.js */  var Graphics=function(c){var o=$(c);var m=$(o).get(0).getContext("2d");var n=null;var b="rgb";var d="origin";var a={};var e={background:null,fill:null,stroke:null,width:0};var k={};var i={font:"sans-serif",size:12,align:"left",color:Colors.decode("black"),alpha:1,baseline:"ideographic"};var l=[];var p=Primitives(m,e,i);var r=p._Ellipse;var q=p._Rect;var g=p._Octagon;var s=p._Triangle;var j=p._Color;var h=p._Path;var f={init:function(){if(!m){return null}return f},size:function(u,t){if(!isNaN(u)&&!isNaN(t)){o.attr({width:u,height:t})}return{width:o.attr("width"),height:o.attr("height")}},clear:function(t,z,u,v){if(arguments.length<4){t=0;z=0;u=o.attr("width");v=o.attr("height")}m.clearRect(t,z,u,v);if(e.background!==null){m.save();m.fillStyle=Colors.encode(e.background);m.fillRect(t,z,u,v);m.restore()}},background:function(u,t,x,v){if(u==null){e.background=null;return null}var w=Colors.decode(u,t,x,v);if(w){e.background=w;f.clear()}},noFill:function(){e.fill=null},fill:function(u,t,x,v){if(arguments.length==0){return e.fill}else{if(arguments.length>0){var w=Colors.decode(u,t,x,v);e.fill=w;m.fillStyle=Colors.encode(w)}}},noStroke:function(){e.stroke=null;m.strokeStyle=null},stroke:function(u,t,x,w){if(arguments.length==0&&e.stroke!==null){return e.stroke}else{if(arguments.length>0){var v=Colors.decode(u,t,x,w);e.stroke=v;m.strokeStyle=Colors.encode(v)}}},strokeWidth:function(t){if(t===undefined){return m.lineWidth}m.lineWidth=e.width=t},Color:function(t){return new j(t)},drawStyle:function(u){if(arguments.length==0){return objcopy(e)}if(arguments.length==2){var t=arguments[0];var x=arguments[1];if(typeof t=="string"&&typeof x=="object"){var w={};if(x.color!==undefined){var v=Colors.decode(x.color);if(v){w.color=v}}$.each("background fill stroke width".split(" "),function(y,z){if(x[z]!==undefined){w[z]=x[z]}});if(!$.isEmptyObject(w)){a[t]=w}}return}if(arguments.length==1&&a[arguments[0]]!==undefined){u=a[arguments[0]]}if(u.width!==undefined){e.width=u.width}m.lineWidth=e.width;$.each("background fill stroke",function(A,z){if(u[z]!==undefined){if(u[z]===null){e[z]=null}else{var y=Colors.decode(u[z]);if(y){e[z]=y}}}});m.fillStyle=e.fill;m.strokeStyle=e.stroke},textStyle:function(u){if(arguments.length==0){return objcopy(i)}if(arguments.length==2){var t=arguments[0];var x=arguments[1];if(typeof t=="string"&&typeof x=="object"){var w={};if(x.color!==undefined){var v=Colors.decode(x.color);if(v){w.color=v}}$.each("font size align baseline alpha".split(" "),function(y,z){if(x[z]!==undefined){w[z]=x[z]}});if(!$.isEmptyObject(w)){k[t]=w}}return}if(arguments.length==1&&k[arguments[0]]!==undefined){u=k[arguments[0]]}if(u.font!==undefined){i.font=u.font}if(u.size!==undefined){i.size=u.size}m.font=nano("{size}px {font}",i);if(u.align!==undefined){m.textAlign=i.align=u.align}if(u.baseline!==undefined){m.textBaseline=i.baseline=u.baseline}if(u.alpha!==undefined){i.alpha=u.alpha}if(u.color!==undefined){var v=Colors.decode(u.color);if(v){i.color=v}}if(i.color){var v=Colors.blend(i.color,i.alpha);if(v){m.fillStyle=v}}},text:function(u,t,B,z){if(arguments.length>=3&&!isNaN(t)){z=z||{};z.x=t;z.y=B}else{if(arguments.length==2&&typeof(t)=="object"){z=t}else{z=z||{}}}var w=objmerge(i,z);m.save();if(w.align!==undefined){m.textAlign=w.align}if(w.baseline!==undefined){m.textBaseline=w.baseline}if(w.font!==undefined&&!isNaN(w.size)){m.font=nano("{size}px {font}",w)}var A=(w.alpha!==undefined)?w.alpha:i.alpha;var v=(w.color!==undefined)?w.color:i.color;m.fillStyle=Colors.blend(v,A);if(A>0){m.fillText(u,Math.round(w.x),w.y)}m.restore()},textWidth:function(t,v){v=objmerge(i,v||{});m.save();m.font=nano("{size}px {font}",v);var u=m.measureText(t).width;m.restore();return u},Rect:function(t,B,u,z,A,v){return new q(t,B,u,z,A,v)},rect:function(t,B,u,z,A,v){q.prototype._draw(t,B,u,z,A,v)},Ellipse:function(t,A,u,z,v){return new r(t,A,u,z,v)},ellipse:function(t,A,u,z,v){v=v||{};r.prototype._draw(t,A,u,z,v)},Octagon:function(t,B,u,z,A,v){return new g(t,B,u,z,A,v)},octagon:function(t,B,u,z,A,v){g.prototype._draw(t,B,u,z,A,v)},Triangle:function(t,B,u,z,A,v){return new s(t,B,u,z,A,v)},triangle:function(t,B,u,z,A,v){s.prototype._draw(t,B,u,z,A,v)},line:function(u,x,t,v,w){var y=new h(u,x,t,v);y.draw(w)},lines:function(u,w,t,v){if(typeof v=="number"){l.push([{x:u,y:w},{x:t,y:v}])}else{l.push([u,w])}},drawLines:function(t){var u=new h(l);u.draw(t);l=[]}};return f.init()};

  arbor = (typeof(arbor)!=='undefined') ? arbor : {}
  $.extend(arbor, {
    // object constructor (don't use ‘new’, just call it)
    Graphics:function(ctx){ return Graphics(ctx) },

    // useful methods for dealing with the r/g/b
    colors:{
      CSS:Colors.CSS,           // dict:{colorname:"#fef2e2", ...}
      validate:Colors.validate, // ƒ(str) -> t/f
      decode:Colors.decode,     // ƒ(hexString_or_cssColor) -> {r,g,b,a}
      encode:Colors.encode,     // ƒ({r,g,b,a}) -> hexOrRgbaString
      blend:Colors.blend        // ƒ(color, opacity) -> rgbaString
    }
  })
  
})(this.jQuery)